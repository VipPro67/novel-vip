<?xml version="1.0" encoding="UTF-8"?>
<Configuration status="WARN">
  <Properties>
    <Property name="LOGSTASH_URL">http://logstash:5044</Property>
  </Properties>
  <Appenders>
    <Http name="LogstashHttp" url="${LOGSTASH_URL}" method="POST">
      <JsonLayout complete="true" compact="true" eventEol="true" properties="true" />
    </Http>

    <File name="LocalFile" fileName="logs/app.log">
      <PatternLayout pattern="%d{ISO8601} %-5p [%t] %c: %m%n"/>
    </File>

    <Console name="Console" target="SYSTEM_OUT">
      <PatternLayout pattern="%d{ISO8601} %-5p [%t] %c: %m%n"/>
    </Console>
  </Appenders>
  <Loggers>
    <Root level="info">
      <AppenderRef ref="Console"/>
      <AppenderRef ref="LogstashHttp"/>
      <AppenderRef ref="LocalFile"/>
    </Root>
  </Loggers>
</Configuration>